import{i as D,j as k,k as H,l as E,m as I,H as L,o as V,q as T,s as w,r as A,t as M,e as y,u as Y,v as q,w as B,x as P,y as $,z as j,a as z,p as C,h as b,A as W,g as F,B as G}from"./runtime.CwkOMOqe.js";import{b as J}from"./disclose-version.Dz1MMdur.js";const K=new Set,N=new Set;function v(r){var R;var t=this,i=t.ownerDocument,l=r.type,o=((R=r.composedPath)==null?void 0:R.call(r))||[],a=o[0]||r.target,d=0,c=r.__root;if(c){var f=o.indexOf(c);if(f!==-1&&(t===document||t===window)){r.__root=t;return}var u=o.indexOf(t);if(u===-1)return;f<=u&&(d=f)}if(a=o[d]||r.target,a!==t){D(r,"currentTarget",{configurable:!0,get(){return a||i}});try{for(var _,e=[];a!==null;){var s=a.assignedSlot||a.parentNode||a.host||null;try{var n=a["__"+l];if(n!==void 0&&!a.disabled)if(k(n)){var[g,...p]=n;g.apply(a,[r,...p])}else n.call(a,r)}catch(m){_?e.push(m):_=m}if(r.cancelBubble||s===t||s===null)break;a=s}if(_){for(let m of e)queueMicrotask(()=>{throw m});throw _}}finally{r.__root=t,delete r.currentTarget}}}const Q=["touchstart","touchmove"];function U(r){return Q.includes(r)}function rr(r,t){t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t==null?"":t+"")}function X(r,t){const i=t.anchor??t.target.appendChild(H());return O(r,{...t,anchor:i})}function tr(r,t){E(),t.intro=t.intro??!1;const i=t.target,l=b,o=y;try{for(var a=I(i);a&&(a.nodeType!==8||a.data!==L);)a=V(a);if(!a)throw T;w(!0),A(a),M();const d=O(r,{...t,anchor:a});if(y===null||y.nodeType!==8||y.data!==Y)throw q(),T;return w(!1),d}catch(d){if(d===T)return t.recover===!1&&B(),E(),P(i),w(!1),X(r,t);throw d}finally{w(l),A(o)}}const h=new Map;function O(r,{target:t,anchor:i,props:l={},events:o,context:a,intro:d=!0}){E();var c=new Set,f=e=>{for(var s=0;s<e.length;s++){var n=e[s];if(!c.has(n)){c.add(n);var g=U(n);t.addEventListener(n,v,{passive:g});var p=h.get(n);p===void 0?(document.addEventListener(n,v,{passive:g}),h.set(n,1)):h.set(n,p+1)}}};f($(K)),N.add(f);var u=void 0,_=j(()=>(z(()=>{if(a){C({});var e=G;e.c=a}o&&(l.$$events=o),b&&J(i,null),u=r(i,l)||{},b&&(W.nodes_end=y),a&&F()}),()=>{for(var e of c){t.removeEventListener(e,v);var s=h.get(e);--s===0?(document.removeEventListener(e,v),h.delete(e)):h.set(e,s)}N.delete(f),S.delete(u)}));return S.set(u,_),u}let S=new WeakMap;function ar(r){const t=S.get(r);t&&t()}export{tr as h,X as m,rr as s,ar as u};
